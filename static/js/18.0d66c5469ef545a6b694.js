webpackJsonp([18],{"55wE":function(t,e){},JxkP:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("zXZu"),i=s("woyf"),l={components:{uploadone:a.a,uploader:i.a},data:function(){return{success:{user_contact:{name:"",phoneNumber:"",address:""},leaveWords:"",goodsTotalFee:"",expressFee:"",couponDiscount:"",memberDiscount:"",coinDiscount:""},goodscentend:[],allGoodsTotalFee:"",goodStatus:!0,myname:"尊敬的彪彪",order_serial_number:"321351651361",isif:!1,files:[],uploadLen:6,imgs:[],ImgList:[{},{},{},{},{},{}],userDatas:{},iamgeUrl:"",fileList:[],refundStatusTwo:[],ocrId:"",refundStatustwo:!0,refundStatusThree:[],refundStatusthree:!1,baseURL:""}},mounted:function(){this.userDatas.token=this.$cookies.get("token"),this.userDatas.userId=this.$cookies.get("userId"),this.getOrderDetailByOrderId(),this.getReftCause(),this.getbaseURL()},methods:{getbaseURL:function(){console.log("获取baseURL---------"),console.log(this.$baseURL),this.baseURL=this.$baseURL},upload:function(){this.isif=!0},getfileList:function(t){this.fileList=t,console.log(this.fileList)},acquireValue:function(){this.ocrId=this.$refs.select2.value},orNotReceiving:function(){"已收货"==this.$refs.select1.value?(this.refundStatustwo=!0,this.refundStatusthree=!1,this.goodStatus=!0):(this.refundStatustwo=!1,this.refundStatusthree=!0,this.goodStatus=!1)},getChildrenFile:function(t){var e=this;console.log(t),this.files=t,console.log(this.files.length),this.iamgeUrl="",t.forEach(function(t,s){e.iamgeUrl+="&iamgeUrl[]="+t.Url[0]}),console.log(this.iamgeUrl)},getOrderDetailByOrderId:function(){var t=this;this.$getAxios({url:"/mall/getOrderDetailByOrderId",method:"get",params:{token:this.$cookies.get("token"),orderId:this.$cookies.get("orderId"),userId:this.$cookies.get("userId")}}).then(function(e){t.success=e.data.extend.success,t.allGoodsTotalFee=t.success.expressFee+t.success.goodsTotalFee;var a=document.getElementsByClassName("goods_centent_status")[0],i=document.getElementsByClassName("goods_centent_status")[1],l=e.data.extend.success.order_detail.length;a.style.height=92*l+"px",a.style.lineHeight=92*l+"px",a.style.marginTop=-92*(l-1)+"px",i.style.height=92*l+"px",i.style.lineHeight=92*l+"px",i.style.marginTop=-92*(l-1)+"px";for(var n=0;n<e.data.extend.success.order_detail.length;n++){var o={amount:e.data.extend.success.order_detail[n].amount,price:e.data.extend.success.order_detail[n].price,name:e.data.extend.success.order_detail[n].goods.name};o.imageUrl=s("ADp8"),0!=e.data.extend.success.order_detail[n].goods.goods_images.length&&(o.imageUrl=e.data.extend.success.order_detail[n].goods.goods_images[0].imageUrl),o.valueList="",0==e.data.extend.success.order_detail[n].goods.cps.length||0!=e.data.extend.success.order_detail[n].goods.cps[0].valueList.length&&(o.valueList+=e.data.extend.success.order_detail[n].goods.cps[0].valueList[0].value),t.goodscentend.push(o)}})},submit:function(){this.$postAxios({url:"/mall/refund",method:"post",data:"userId="+this.$cookies.get("userId")+"&token="+this.$cookies.get("token")+"&ocrId="+this.ocrId+"&money="+this.allGoodsTotalFee+"&explain="+this.$refs.explain.value+"&orderDetailId="+this.$cookies.get("orderId")+"&refundType=0&goodStatus="+this.goodStatus+this.iamgeUrl}).then(function(t){2e4!=t.data.code&&1e4==t.data.code&&(console.log(t.data),alert("申请退款成功"))}).catch(function(t){console.log(t)})},getReftCause:function(){var t=this;this.$getAxios({url:"/mall/getReftCause"}).then(function(e){for(var s=0;s<e.data.extend.success.length;s++)if(2==e.data.extend.success[s].ocrStatus){var a={ocrId:e.data.extend.success[s].ocrId,orderCloseReason:e.data.extend.success[s].orderCloseReason,ocrStatus:e.data.extend.success[s].ocrStatus};t.refundStatusTwo.push(a)}else if(3==e.data.extend.success[s].ocrStatus){var i={ocrId:e.data.extend.success[s].ocrId,orderCloseReason:e.data.extend.success[s].orderCloseReason,ocrStatus:e.data.extend.success[s].ocrStatus};t.refundStatusThree.push(i)}})}}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"refund-apply",attrs:{id:"refund_apply"}},[s("div",{staticClass:"apply-information"},[t._m(0),t._v(" "),t._m(1),t._v(" "),s("div",[t._l(t.goodscentend,function(e,a){return s("ul",{staticClass:"apply_content fl"},[s("li",{staticClass:"fl header-ul1"},[s("div",{staticClass:"header-ul1_box"},[s("img",{staticClass:"fl",attrs:{src:e.imageUrl}}),t._v(" "),s("div",{staticClass:"drug_facts"},[s("div",{staticClass:" merchandise_news"},[t._v(t._s(e.name))]),t._v(" "),s("div",{staticClass:"txt"},[t._v(t._s(e.valueList))])])])]),t._v(" "),s("li",{staticClass:"fl header-ul2"},[t._v("￥"+t._s(e.price))]),t._v(" "),s("li",{staticClass:"fl header-ul3"},[t._v(t._s(e.amount))])])}),t._v(" "),s("li",{staticClass:"fl header-ul4 goods_centent_status"},[t._v("已发货")]),t._v(" "),s("li",{staticClass:"fl header-ul5 goods_centent_status"},[t._v("￥"+t._s(t.allGoodsTotalFee))]),t._v(" "),s("div",{staticClass:"orderNum clear"},[t._v("\n            \t\t订单编号:"+t._s(t.success.orderSerialNumber)+"\n            \t")]),t._v(" "),t._m(2),t._v(" "),s("div",{staticClass:"applycontent_content"},[s("ul",[s("li"),t._v(" "),s("li",[t._m(3),t._v(" "),s("select",{ref:"select2",staticClass:"select",attrs:{name:"select2"},on:{change:t.acquireValue}},[t._l(t.refundStatusTwo,function(e,a){return t.refundStatustwo?s("option",{domProps:{value:e.ocrId}},[t._v(t._s(e.orderCloseReason))]):t._e()}),t._v(" "),t._l(t.refundStatusThree,function(e,a){return t.refundStatusthree?s("option",{domProps:{value:e.ocrId}},[t._v(t._s(e.orderCloseReason))]):t._e()})],2)]),t._v(" "),s("li",[t._m(4),t._v(" "),s("input",{ref:"money",staticClass:"inputtxt",attrs:{type:"text",disabled:""},domProps:{value:t.allGoodsTotalFee}}),t._v("元\n                \t\t")]),t._v(" "),s("li",[t._m(5),t._v(" "),s("input",{ref:"explain",staticClass:"inputtxt",attrs:{type:"text",value:""}})]),t._v(" "),t._m(6),t._v(" "),s("li",[s("div",{staticClass:"applycontent_txt applycontent_txt1"}),t._v(" "),s("button",{staticClass:"uploadbtn",on:{click:t.upload}},[t._v("上传凭证")])]),t._v(" "),t.isif?s("li",[s("uploader",{attrs:{src:t.baseURL+"/mall/userupload/multipicture",files:t.imgs,uploadLen:t.uploadLen,datas:t.userDatas},on:{getFile:t.getChildrenFile}})],1):t._e(),t._v(" "),s("li",[s("div",{staticClass:"applycontent_txt applycontent_txt1"}),t._v(" "),s("button",{staticClass:"submitbtn",on:{click:t.submit}},[t._v("确认提交")]),t._v(" "),s("button",{staticClass:"cancelbtn"},[t._v("取消")])])])])],2)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h3",[e("span",[this._v("订单概况")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ul",{staticClass:"header-ul"},[s("li",{staticClass:"fl header-ul1"},[t._v("商品信息")]),t._v(" "),s("li",{staticClass:"fl header-ul2"},[t._v("单价")]),t._v(" "),s("li",{staticClass:"fl header-ul3"},[t._v("数量")]),t._v(" "),s("li",{staticClass:"fl header-ul4"},[t._v("订单状态")]),t._v(" "),s("li",{staticClass:"fl header-ul5"},[t._v("实际付款")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"applycontent_box"},[e("p",{staticClass:"applycontent"},[this._v("申请退款")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"applycontent_txt"},[e("span",[this._v("*")]),e("span",[this._v("退货原因")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"applycontent_txt"},[this._v(" "),e("span",[this._v("退款金额")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"applycontent_txt"},[this._v(" "),e("span",[this._v("退货说明")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("div",{staticClass:"applycontent_txt"},[this._v(" "),e("span",[this._v("退货凭证")])]),this._v(" "),e("span",{staticClass:"spantxt"},[this._v("上传规格图片,推荐图片尺寸38x38px  最多上传6张")])])}]};var o=s("VU/8")(l,n,!1,function(t){s("55wE")},"data-v-1b6c05c2",null);e.default=o.exports},V2nH:function(t,e){},zXZu:function(t,e,s){"use strict";var a={props:{fileList:Array},data:function(){return{status:"ready",files:[],point:{},uploading:!1}},methods:{add:function(){this.$refs.file.click()},finished:function(){this.files=[],this.status="ready"},remove:function(t){this.files.splice(t,1),this.$emit("fileList",this.files)},fileChanged:function(){for(var t=this.$refs.file.files,e=0;e<t.length;e++){var s="image/jpeg"===t[e].type,a="image/png"===t[e].type,i=t[e].size/1024<200;if(s||a)if(i){if(!this.isContain(t[e])){var l={name:t[e].name,size:t[e].size,file:t[e],shouldUpload:!0};this.files.push(l),this.html5Reader(t[e],l)}}else this.$message.error("上传图片大小不能超过 200k!");else this.$message.error("上传图片只能是 JPG、PNG 格式!")}this.$refs.file.value=""},html5Reader:function(t,e){var s=this,a=new FileReader;a.onload=function(t){s.$set(e,"src",t.target.result),console.log(s.files),s.$emit("fileList",s.files)},a.readAsDataURL(t)},isContain:function(t){return this.files.find(function(e){return e.name===t.name&&e.size===t.size})}},watch:{fileList:function(){this.files=this.fileList}}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"vue-uploader"},[s("div",{staticClass:"file-list"},[t._l(t.files,function(e,a){return s("section",{staticClass:"file-item draggable-item"},[s("img",{attrs:{src:e.src,alt:"",ondragstart:"return false;"}}),t._v(" "),s("span",{staticClass:"file-remove",on:{click:function(e){t.remove(a)}}},[t._v("+")])])}),t._v(" "),0==t.files.length?s("section",{staticClass:"file-item"},[s("div",{staticClass:"add",on:{click:t.add}},[s("i",{staticClass:"el-icon-plus"})])]):t._e()],2),t._v(" "),s("input",{ref:"file",attrs:{type:"file",accept:"image/*",multiple:"multiple"},on:{change:t.fileChanged}})])},staticRenderFns:[]};var l=s("VU/8")(a,i,!1,function(t){s("V2nH")},"data-v-0de5a96e",null);e.a=l.exports}});