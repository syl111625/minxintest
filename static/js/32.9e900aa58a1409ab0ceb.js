webpackJsonp([32],{Xeiq:function(e,t){},Ydwa:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){return{popup:{width:window.innerWidth+"px",height:window.innerHeight+"px",position:"fixed",top:0,left:0,background:"rgb(0,0,0,0.7)",zIndex:9999},noMore:!1,isPages:!1,orderData:[],totalPages:1,pageSize:10,pageNum:1,totalData:0,shutone:!0,confirmReceiptCentent:null,orderParameter:{},timer:[],countTimer:null,logistics:{isCheck:!1,logList:[]},shut:!1,loading:!0,loadingTimer:null,href:null}},mounted:function(){this.href=window.location.href,this.$cookies.get("userId")&&this.$cookies.get("token")?this.getWaitReceiving():(this.$cookies.remove("userId"),this.$cookies.remove("token"),this.$router.push({path:"/wholesalerLogin?redirectUrl="+this.href}))},activated:function(){this.pageNum>1&&(this.pageNum=1,this.getWaitReceiving())},destroyed:function(){},methods:{togoodDetails:function(e){window.open("#/product_details/"+e+"?goodsId="+e)},applicationClick:function(e,t){this.$cookies.set("orderDetailId",e),this.$cookies.set("orderId",t),this.$router.push("/afterSale?orderDetailId="+e)},toDetails:function(e){this.$cookies.set("orderId",e,{expires:.1}),window.open("#/orderDetails?"+e)},lookbtn:function(e){if(this.$cookies.get("userId")&&this.$cookies.get("token")){var t=this,s={userId:this.$cookies.get("userId"),token:this.$cookies.get("token"),orderId:e};this.$getAxios({url:"/mall/queryUserExpress",method:"get",params:s}).then(function(e){if(2e4==e.data.code)if(t.logistics.logList=[],e.data.extend.err_code.indexOf("令牌失效")>-1)t.$cookies.remove("userId"),t.$cookies.remove("token"),t.$router.push({path:"/wholesalerLogin?redirectUrl="+t.href});else{t.logistics.isCheck=!0,t.logList=[];var s={status:e.data.extend.err_code};t.logistics.logList.push(s)}else if(1e4==e.data.code){t.logistics.isCheck=!0,t.logistics.logList=[];var a=e.data.extend.success;if(0==a.length||null==a);else for(var i=0;i<a.length;i++){s={timer:a[i].time,status:a[i].status};t.logistics.logList.push(s)}}}).catch(function(e){console.log(e),t.$message({showClose:!0,duration:1600,message:"网络异常，请您重新刷新"})})}},openAgainOrder:function(e){var t=this;this.$cookies.get("userId")&&this.$cookies.get("token")?this.$postAxios({url:"/mall/reBuyForOrderCenter",method:"post",data:"userId="+this.$cookies.get("userId")+"&token="+this.$cookies.get("token")+"&orderId="+e.orderId}).then(function(s){if(1e4==s.data.code){t.oneMoreOrder=s.data.extend.success,t.$countStore.state.cartList.getCountDate();var a=[];e.detailList.forEach(function(e){a.push(e.goodsSkuId)}),t.$router.push({name:"shoppingCart",params:{goodsId:a}})}else if(2e4==s.data.code){s.data.extend.err_code.indexOf("令牌失效")>-1?(t.$cookies.remove("userId"),t.$cookies.remove("token"),t.$router.push({path:"/wholesalerLogin?redirectUrl="+t.href})):t.$message({showClose:!0,duration:1600,message:"网络异常，请您重新刷新"})}}).catch(function(e){t.$message({showClose:!0,duration:1600,message:"网络异常，请您重新刷新"})}):(_this.$cookies.remove("userId"),_this.$cookies.remove("token"),_this.$router.push({path:"/wholesalerLogin"}))},scrollEvent:function(){var e=this.$refs.waitCont.offsetTop;window.scrollTo(100,e)},loadingEvent:function(){var e=this;this.loadingTimer=setTimeout(function(){e.loading=!1},3e3)},nextPage:function(){this.pageNum<this.totalPages&&(this.isPages=!1,this.loading=!0,this.pageNum++,this.getWaitReceiving())},prePage:function(){this.isPages=!1,this.loading=!0,this.pageNum>1?(this.pageNum--,this.getWaitReceiving()):(this.pageNum=1,this.getWaitReceiving())},handleSizeChange:function(e){this.pageSize=e,this.pageNum=1},handleCurrentChange:function(e){this.isPages=!1,this.loading=!0,this.pageNum=e,this.scrollEvent(),this.getWaitReceiving()},refundOrderStatus:function(e){return 0==e?"退款申请中":1==e?"":2==e?"退款申请中":3==e?"退款申请中":4==e?"":5==e?"退款成功":void 0},forlataTime:function(e){var t=new Date(e),s=t.getFullYear(),a=t.getMonth()+1;a=a<10?"0"+a:a;var i=t.getDate();i=i<10?"0"+i:i;var o=t.getHours(),r=t.getMinutes();r=r<10?"0"+r:r;var n=t.getSeconds();return n=n<10?"0"+n:n,s+"-"+a+"-"+i+" "+o+":"+r},getWaitReceiving:function(){var e=this,t=this.$cookies.get("userId"),a=this;null!=this.countTimer&&clearInterval(this.countTimer),this.$getAxios({url:"/mall/pc/listOrderDate",method:"get",params:{userId:t,startDate:"",endDate:"",orderStatus:1,commentStatus:"",customerService:"",goodsNameOrCode:"",payWay:"",pageNo:a.pageNum,number:a.pageSize}}).then(function(t){if(a.orderData=[],2e4==t.data.code)a.noMore=!0,a.loading=!1,t.data.extend.err_code.indexOf("令牌失效")>-1?(a.$cookies.remove("userId"),a.$cookies.remove("token"),a.$router.push({path:"/wholesalerLogin"})):e.$message({showClose:!0,duration:1600,message:"网络异常，请您重新刷新"});else if(1e4==t.data.code){a.noMore=!1,a.isPages=!0,a.loading=!1;var i=t.data.extend.success;i.length>0&&(a.totalData=i[0].count,a.totalPages=Math.ceil(a.totalData/a.pageSize));for(var o=0;o<i.length;o++){var r={payWay:i[o].payWay,orderId:i[o].orderId,orderSerialNumber:i[o].orderSerialNumber,goodsTotalFee:i[o].goodsTotalFee,addTime:i[o].addTime,totalBuyerPay:i[o].totalBuyerPay,ots_periods_of_time:i[o].ots_periods_of_time,expressFee:i[o].expressFee,isCount:!1,daojs:""};0==r.payWay?r.mode="支付方式 :余额支付":1==r.payWay?r.mode="支付方式 :支付宝支付":2==r.payWay?r.mode="支付方式 :微信支付":3==r.payWay?r.mode="支付方式 :货到付款":null==r.payWay&&(r.mode="支付方式 :未选择支付方式"),r.addTime=a.forlataTime(i[o].addTime);for(var n=0;n<t.data.extend.success[o].status.length;n++)1==i[o].status[n].status&&(r.statusWord="买家已付款",r.status=i[o].status[n].status,r.new_addTime=i[o].status[n].addTime);r.detailList=[],r.stool=0;for(var l=0,d=0;d<i[o].detail.length;d++){r.stool+=1*i[o].detail[d].amount;var c={amount:i[o].detail[d].amount,goodsSkuId:i[o].detail[d].goodsSkuId,price:i[o].detail[d].price,orderDetailId:i[o].detail[d].orderDetailId};null==i[o].detail[d].refund_order_status||""==i[o].detail[d].refund_order_status?c.isRefundCheck=!1:(c.isRefundCheck=!0,c.refundWord=a.refundOrderStatus(i[o].detail[d].refund_order_status.rosStatus)),c.iconUrlList=[];var u=i[o].detail[d].activityAndFlashSaleIconUrl;if(null==u||""==u);else{var g={};null!=u.activityIconUrl&&""!=u.activityIconUrl&&(g.iconUrl=u.activityIconUrl),null!=u.fsIconUrl&&""!=u.fsIconUrl&&(g.iconUrl=u.fsIconUrl),c.iconUrlList.push(g)}if(null==i[o].detail[d].goods||""==i[o].detail[d].goods)l++;else{c.goodsId=i[o].detail[d].goods.goodId,c.name=i[o].detail[d].goods.name;var h=i[o].detail[d].goods.detailCpropertyVo;if(c.specification="",c.manufacturers="",0==h.length||null==h);else for(var v=0;v<h.length;v++)h[v].cpName.indexOf("厂家")>-1?c.manufacturers=h[v].value:h[v].cpName.indexOf("规格")>-1&&(c.specification=h[v].value);var p=i[o].detail[d].goods.goods_images;if(null==p||0==p.length)c.imageUrl=s("ADp8");else for(var _=0;_<p.length;_++)if(1==p[_].isHead){null==p[_].imageUrl||""==p[_].imageUrl||(c.imageUrl=p[_].imageUrl);break}void 0==c.imageUrl?c.imageUrl=s("ADp8"):c.imageUrl=c.imageUrl+"?x-oss-process=style/fixed_60_60",r.detailList.push(c)}}l==i[o].detail.length&&i[o].detail.length>0||a.orderData.push(r)}0==a.orderData.length?(a.noMore=!0,0==a.totalData&&(a.isPages=!1)):(a.noMore=!1,a.isPages=!0)}}).catch(function(t){a.noMore=!0,a.isPages=!1,a.loading=!1,a.orderData=[],e.$message({showClose:!0,duration:1600,message:"网络异常，请您重新刷新"}),console.log(t)})}}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"wait-receiving"}},[s("div",{staticClass:"ord_center_box"},[s("div",{ref:"waitCont",staticClass:"wait-content"},[s("div",{staticClass:"list_txt"},[e._m(0),e._v(" "),e.totalData>0?s("div",[s("button",{staticClass:"fr",class:e.pageNum==e.totalPages?"prevPage":"",attrs:{disabled:e.pageNum==e.totalPages},on:{click:e.nextPage}},[e._v("下一页")]),e._v(" "),s("button",{staticClass:"fr",class:1==e.pageNum?"prevPage":"",attrs:{disabled:1==e.pageNum},on:{click:e.prePage}},[e._v("上一页")])]):e._e()]),e._v(" "),s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"all_centent_box clear"},e._l(e.orderData,function(t,a){return s("div",{key:a,staticClass:"all_centent clear"},[s("div",{staticClass:"all_centent_header"},[s("el-checkbox"),e._v(" "),s("span",[e._v("订单号："+e._s(t.orderSerialNumber))]),e._v(" "),s("span",[e._v("下单时间："+e._s(t.addTime))]),e._v(" "),s("span",[e._v(e._s(t.mode))])],1),e._v(" "),s("table",{attrs:{border:"0",cellspacing:"0",cellpadding:"0"}},[s("tr",[s("td",{staticClass:"order_data1"},e._l(t.detailList,function(a,i){return s("div",{key:i},[s("tr",[s("td",{staticClass:"detailList1",on:{click:function(t){e.togoodDetails(a.goodsId)}}},[s("div",{staticClass:"fl goodsImg"},[s("img",{attrs:{src:a.imageUrl,alt:""}})]),e._v(" "),s("div",{staticClass:"detailList1-content fl"},[s("div",{staticClass:"goods_name"},[e._v(e._s(a.name))]),e._v(" "),s("div",{staticClass:"goods_names"},[e._v(e._s(a.specification))]),e._v(" "),s("div",{staticClass:"goods_names"},[e._v(e._s(a.manufacturers))]),e._v(" "),a.iconUrlList.length>0?s("div",{staticClass:"activeIcon"},[e._l(a.iconUrlList,function(t,a){return a<2?s("div",{staticClass:"fl activeIcon-iconUrl",staticStyle:{display:"block"}},[s("img",{attrs:{src:t.iconUrl,alt:""}})]):e._e()}),e._v(" "),a.iconUrlList.length>2?s("div",{staticClass:"more_activities"},[e._l(a.iconUrlList,function(e,t){return s("div",{staticClass:"fl"},[s("img",{attrs:{src:e.iconUrl,alt:""}})])}),e._v(" "),s("span")],2):e._e()],2):e._e()])]),e._v(" "),s("td",{staticClass:"detailList2"},[e._v("￥"+e._s(a.price))]),e._v(" "),s("td",{staticClass:"detailList3"},[e._v(e._s(a.amount))]),e._v(" "),s("td",{staticClass:"detailList4"},[a.isRefundCheck?s("span",[e._v(e._s(a.refundWord))]):s("span",{staticClass:"application",staticStyle:{cursor:"pointer"},on:{click:function(s){e.applicationClick(a.orderDetailId,t.orderId)}}},[e._v("退款")])])])])})),e._v(" "),s("td",{staticClass:"order_data2"},[s("div",[s("span",{staticStyle:{"font-weight":"bold","line-height":"23px"}},[e._v("￥"+e._s(t.totalBuyerPay))]),e._v(" "),s("span",[e._v("(含运费：￥"+e._s(t.expressFee)+")")])])]),e._v(" "),s("td",{staticClass:"order_data3"},[s("div",[s("span",[e._v(e._s(t.statusWord))]),e._v(" "),s("span",{staticClass:"details-style",on:{click:function(s){e.toDetails(t.orderId)}}},[e._v("订单详情")])])]),e._v(" "),s("td",{staticClass:"order_data4"},[s("div",[s("span",[s("button",{staticClass:"single_again",on:{click:function(s){e.openAgainOrder(t)}}},[e._v("再来一单")])])])])])])])})),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isPages,expression:"isPages"}],staticClass:"page"},[s("el-pagination",{attrs:{"current-page":e.pageNum,"page-sizes":[10,20,50],"page-size":e.pageSize,layout:" prev, pager, next, jumper",total:e.totalData},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),e.noMore?s("div",{staticClass:"none-more"},[e._v("暂无更多订单")]):e._e()])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[s("li",{staticClass:"fl list_txt1"},[e._v("商品")]),e._v(" "),s("li",{staticClass:"fl list_txt2"},[e._v("单价")]),e._v(" "),s("li",{staticClass:"fl list_txt3"},[e._v("数量")]),e._v(" "),s("li",{staticClass:"fl list_txt7"},[e._v("申请售后")]),e._v(" "),s("li",{staticClass:"fl list_txt4"},[e._v("实付款")]),e._v(" "),s("li",{staticClass:"fl list_txt5"},[e._v("交易状态")]),e._v(" "),s("li",{staticClass:"fl list_txt6"},[e._v("交易操作")])])}]};var o=s("VU/8")(a,i,!1,function(e){s("Xeiq")},"data-v-7d7413aa",null);t.default=o.exports}});