webpackJsonp([25],{CCjA:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,o=s("bOdI"),i=s.n(o),r=s("Q4vP"),n=s("WpU2"),l=s("Lmvl"),c=s("CSRX"),d=s("/hfu"),u=(a={name:"timeLimitToSnapUp",components:{homeHeader:r.a,search:n.a,publicFooter:l.a,contentHeader:c.a,sideBar:d.a},computed:{},data:function(){return{scrollCheck:!1,startFlashSaleData:[],notStartedFlashSaleData:[],oldTimeList:[],nowTimeList:[],active:0,cententActive:1,num:0,timer:""}},created:function(){var e=this;this.getStartFlashSale(),this.getNotStartedFlashSale(),this.timer=setTimeout(function(){e.startTime(e.oldTimeList)},0),console.log(this.oldTimeList)},mounted:function(){}},i()(a,"computed",{nowTimeLists:function(){var e=this;(new Date).getTime();return this.timer=setTimeout(function(){e.startTime(e.oldTimeList)},1e3),this.nowTimeList}}),i()(a,"methods",{startTime:function(e){var t,s,a,o,i=this;this.nowTimeList=[],e.forEach(function(e,r){if(""==e||null==e)i.nowTimeList.fsStartTime="00:00:00";else{var n=(new Date).getTime(),l=e.fsStartTime-n;l>=0&&(t=Math.floor(l/1e3/60/60/24),s=Math.floor(l/1e3/60/60%24),a=Math.floor(l/1e3/60%60),o=Math.floor(l/1e3%60),0==(t+="天 ")&&(t=""),s<10&&(s="0"+s),a<10&&(a="0"+a),o<10&&(o="0"+o));var c=t+s+":"+a+":"+o}i.nowTimeList.push(c)})},inStart:function(){this.cententActive=1},noStart:function(){this.cententActive=!1},handleScroll:function(){var e=document.body.scrollTop||window.pageYOffset||document.documentElement.scrollTop;this.scrollCheck=e>180},scrollTop:function(){var e=null,t=null;t=setInterval(function(){e=document.body.scrollTop||window.pageYOffset||document.documentElement.scrollTop,window.scrollBy(0,-50),e<=0&&clearInterval(t)},30)},detailsEvent:function(e){this.$router.push({path:"/product_details",name:"product_details",params:{goodsId:e},query:{goodsId:e}})},formatNum:function(e){var t=e;return-1!=t.toString().indexOf(".")&&(t=t.toFixed(1)),t},getStartFlashSale:function(){var e=this,t=this;if(t.$cookies.get("userId"))var a="userId="+t.$cookies.get("userId");else a="userId=";t.$postAxios({url:"/mall/startFlashSale",method:"post",data:a+""}).then(function(a){if(console.log(a.data),2e4==a.data.code)console.log(a.data);else if(1e4==a.data.code){var o=a.data.extend.success.list;0==o.length||null==o?conmsole.log("没数据"):(o.forEach(function(a,o){var i={goodsId:a.goodsId,imageUrl:a.imageUrl,fsName:a.fsName,fsRule:a.fsRule,fsFixedGoodsCount:a.fsFixedGoodsCount,fsGoodsCount:a.fsGoodsCount,fsRuleNumber:a.fsRuleNumber,memberPrice:a.memberPrice,name:a.name,fsIsNumberLimit:a.fsIsNumberLimit,fsLimitNumber:a.fsLimitNumber,totalHasBuyed:a.totalHasBuyed};1==a.fsLimitNumber?i.restricted="购买1件时享受优惠,超出以订单结算为准":a.fsLimitNumber>1&&a.fsLimitNumber<=50?i.restricted="购买1-50件时享受优惠,超出以订单结算为准":a.fsLimitNumber>50&&a.fsLimitNumber<=150&&(i.restricted="购买50-150件时享受优惠,超出以订单结算为准"),""!=a.imageUrl&&null!=a.imageUrl||(i.imageUrl=s("ADp8"));var r=0;null!=a.fsGoodsCount&&""!=a.fsGoodsCount||(i.fsGoodsCount=0),null!=a.fsFixedGoodsCount&&""!=a.fsFixedGoodsCount||(i.fsFixedGoodsCount=0),(r=(a.fsFixedGoodsCount-a.fsGoodsCount)/a.fsFixedGoodsCount*100)>=100&&(i.notFsGoodsCount=!0);var n=r,l=String(n).indexOf(".")+1,c=String(n).length-l;if(i.percentage=c>2?r.toFixed(2):r,0===a.fsRule){var d="减"+a.fsRuleNumber+"元";i.Discount=d;var u=a.memberPrice-a.fsRuleNumber;i.price=e.formatNum(u)}else if(1===a.fsRule){var m="打"+a.fsRuleNumber+"折";i.Discount=m;var v=a.memberPrice*(a.fsRuleNumber/10);i.price=e.formatNum(v)}else if(2===a.fsRule){var p="付"+a.fsRuleNumber+"元";i.Discount=p;var f=a.fsRuleNumber;i.price=e.formatNum(f)}0===a.detailCpropertyVo.length?(i.spec="规格信息更新中",i.manufactor="厂家信息更新中"):1===a.detailCpropertyVo.length?("【规格】"==a.detailCpropertyVo[0].cpName&&(i.spec=a.detailCpropertyVo[0].value,i.manufactor="厂家信息更新中"),"【厂家】"==a.detailCpropertyVo[0].cpName&&(i.spec="规格信息更新中",i.manufactor=a.detailCpropertyVo[0].value)):2===a.detailCpropertyVo.length&&("【规格】"==a.detailCpropertyVo[0].cpName&&(i.spec=a.detailCpropertyVo[0].value),"【厂家】"==a.detailCpropertyVo[0].cpName&&(i.manufactor=a.detailCpropertyVo[0].value),"【规格】"==a.detailCpropertyVo[1].cpName&&(i.spec=a.detailCpropertyVo[1].value),"【厂家】"==a.detailCpropertyVo[1].cpName&&(i.manufactor=a.detailCpropertyVo[1].value)),t.startFlashSaleData.push(i)}),console.log(t.startFlashSaleData))}}).catch(function(e){console.log(e)})},getNotStartedFlashSale:function(){var e=this,t=this;if(t.$cookies.get("userId"))var a="userId="+t.$cookies.get("userId");else a="userId=";t.$postAxios({url:"/mall/notStartedFlashSale",method:"post",data:a+""}).then(function(a){if(console.log(a.data),2e4==a.data.code);else if(1e4==a.data.code){var o=a.data.extend.success.list;0==o.length||null==o?console.log("没数据"):(o.forEach(function(a,o){var i={goodsId:a.goodsId,imageUrl:a.imageUrl,fsRule:a.fsRule,fsRuleNumber:a.fsRuleNumber,memberPrice:a.memberPrice,gMercode:a.gMercode,name:a.name,fsStartTime:a.fsStartTime};if(""!=a.imageUrl&&null!=a.imageUrl||(i.imageUrl=s("ADp8")),0===a.fsRule){var r="减"+a.fsRuleNumber+"元";i.Discount=r,i.price=a.memberPrice-a.fsRuleNumber}else if(1===a.fsRule){var n="打"+a.fsRuleNumber+"折";i.Discount=n,i.price=a.memberPrice*(a.fsRuleNumber/10)}else if(2===a.fsRule){var l="付"+a.fsRuleNumber+"元";i.Discount=l,i.price=a.fsRuleNumber}0===a.detailCpropertyVo.length?(i.spec="规格信息更新中",i.manufactor="厂家信息更新中"):1===a.detailCpropertyVo.length?("【规格】"==a.detailCpropertyVo[0].cpName&&(i.spec=a.detailCpropertyVo[0].value,i.manufactor="厂家信息更新中"),"【厂家】"==a.detailCpropertyVo[0].cpName&&(i.spec="规格信息更新中",i.manufactor=a.detailCpropertyVo[0].value)):2===a.detailCpropertyVo.length&&("【规格】"==a.detailCpropertyVo[0].cpName&&(i.spec=a.detailCpropertyVo[0].value),"【厂家】"==a.detailCpropertyVo[0].cpName&&(i.manufactor=a.detailCpropertyVo[0].value),"【规格】"==a.detailCpropertyVo[1].cpName&&(i.spec=a.detailCpropertyVo[1].value),"【厂家】"==a.detailCpropertyVo[1].cpName&&(i.manufactor=a.detailCpropertyVo[1].value)),t.notStartedFlashSaleData.push(i),t.oldTimeList.push(i),e.timer=setTimeout(function(){t.startTime(t.oldTimeList)},0)}),console.log(t.oldTimeList))}})}}),a),m={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:e.$route.meta.title,expression:"$route.meta.title"}],attrs:{id:"home"}},[s("div",{staticClass:"header"},[s("home-header")],1),e._v(" "),s("div",{staticClass:"search"},[s("search")],1),e._v(" "),s("div",{staticClass:"content"},[s("content-header"),e._v(" "),s("div",{staticClass:"tab"},[s("div",{staticClass:"timeLimitBox"},[s("div",{staticClass:"menuBtnBox"},[s("div",{staticClass:"menuBtnLeft",class:{active:1==e.cententActive},on:{click:e.inStart}},[s("i",{staticClass:"el-icon-goods"}),e._v("\n            正在抢购\n            "),s("div",{class:{menuBtnLeft_icon_active:1==e.cententActive}})]),e._v(" "),s("div",{staticClass:"menuBtnRight",class:{active:0==e.cententActive},on:{click:e.noStart}},[s("i",{staticClass:"el-icon-time"}),e._v("\n            即将开始\n            "),s("div",{class:{menuBtnLeft_icon_active:0==e.cententActive}})])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.cententActive,expression:"cententActive"}],staticClass:"cententData"},[e._l(e.startFlashSaleData,function(t,a){return[s("div",{staticClass:"goods-item",on:{click:function(s){e.detailsEvent(t.goodsId)}}},[s("img",{attrs:{src:t.imageUrl,alt:"抢购商品图"}}),e._v(" "),s("div",{staticClass:"goods-content ellipsis"},[s("p",{staticClass:"goods-name"},[e._v(e._s(t.name))]),e._v(" "),s("p",{staticClass:"goods-limitations ellipsis"},[s("span",{staticClass:"goods-limit"},[e._v("限购")]),e._v(" "),s("span",[e._v(e._s(t.restricted))])]),e._v(" "),s("p",{staticClass:"goods-specs"},[e._v(e._s(t.spec))]),e._v(" "),s("p",{staticClass:"goods-manufacturer"},[e._v(e._s(t.manufactor))]),e._v(" "),s("p",{staticClass:"goods-price"},[s("span",[e._v(e._s(t.price))]),e._v("元")]),e._v(" "),s("p",{staticClass:"goods-old-price"},[s("i",[s("s",[e._v("  "+e._s(t.memberPrice)),s("span",[e._v("元")]),e._v("  ")])])]),e._v(" "),t.notFsGoodsCount?e._e():s("div",{staticClass:"goods-content-goBtn"},[s("div",{staticClass:"myProgress"},[s("div",{staticClass:"percentage",style:{width:t.percentage+"%"}}),e._v(" "),s("p",[e._v("已售"),s("span",[e._v(e._s(t.percentage))]),e._v("%")])]),e._v(" "),s("p",[e._v("马上抢")])]),e._v(" "),t.notFsGoodsCount?s("div",{staticClass:"no-goods-content-goBtn"},[s("span",[e._v("已抢完")])]):e._e()]),e._v(" "),s("div",{staticClass:"discount"},[s("span",[e._v(e._s(t.Discount))])]),e._v(" "),s("div",{staticClass:"triangle"})])]}),e._v(" "),e._m(0)],2),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.cententActive,expression:"!cententActive"}],staticClass:"cententData"},[e._l(e.notStartedFlashSaleData,function(t,a){return[s("div",{staticClass:"goods-item",on:{click:function(s){e.detailsEvent(t.goodsId)}}},[s("img",{attrs:{src:t.imageUrl,alt:"抢购商品图"}}),e._v(" "),s("div",{staticClass:"goods-content"},[s("p",{staticClass:"goods-name"},[e._v(e._s(t.name))]),e._v(" "),s("p",{staticClass:"goods-time"},[e._v("开始时间\n                  "),e.nowTimeLists.length<=0?s("span",[e._v("0天 00:00:00")]):e._e(),e._v(" "),s("span",{domProps:{textContent:e._s(e.nowTimeLists[a])}})]),e._v(" "),s("p",{staticClass:"goods-specs"},[e._v(e._s(t.spec))]),e._v(" "),s("p",{staticClass:"goods-manufacturer"},[e._v(e._s(t.manufactor))]),e._v(" "),s("p",{staticClass:"goods-price"},[e._v("?元")]),e._v(" "),e._m(1,!0)]),e._v(" "),s("div",{staticClass:"discount"},[s("span",[e._v(e._s(t.Discount))])]),e._v(" "),s("div",{staticClass:"triangle"})])]}),e._v(" "),e._m(2)],2)])])],1),e._v(" "),s("div",{staticClass:"footer"},[s("public-footer")],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.scrollCheck,expression:"scrollCheck"}],staticClass:"overhead"},[e._v("顶部")]),e._v(" "),s("side-bar")],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"noMore"},[t("p",[t("span",[this._v("没有更多了")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"goods-content-btn"},[t("i",{staticClass:"el-icon-time"}),this._v(" "),t("span",[this._v("即将开始")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"noMore"},[t("p",[t("span",[this._v("没有更多了")])])])}]};var v=s("VU/8")(u,m,!1,function(e){s("YJy0")},"data-v-e5fd7688",null);t.default=v.exports},YJy0:function(e,t){}});